---
title: IP
author: Hara Oh
date: 2022-02-08 12:02:00 +0800
categories: [Network, Protocol]
tags: [network, ip]
mermaid: true
---
  
# IPv4 
## 주소 표기
- 십진수로 표기
- 숫자가 4개. 그 사이에 점(.)으로 구분
- 숫자 하나가 0 ~ 255까지 가능하다
- 사람이 인식하기 쉽게 10진수로 표기하지만, 컴퓨터는 2진수로 계산
    - 이진수 8bit  0000 0000 ~ 1111 1111
    - 십진수                   0      ~  255
- 주소길이
    - 0 ~255  .  0 ~255  .  0 ~255  .   0 ~255
    - 8bit x 4 = 32bit (4byte)
- 표현할 수 있는 경우 수 : 2^32   > 약 43억개
    - 다 사용가능한 것은 아님
## IPv4 주소 부족
- 쪼개어 사용  
  - 서브넷팅
- 합치기
- DHCP
    - 사용하는 PC에게만 IP주소를 자동으로 할당
- 사설IP주소 대역
    - 사설 IP주소로 이루어진 네트워크 : 사설망
    - 공인 IP주소로 이루어진 네트워크 : 공인망 = 인터넷망
    - 예시
        - 학교
            - 외부KT 전화번호 123-4567
            - 학교 내에 사내 번호
- IP version 6 (128bit)
# Network Address 연산
IP Address와 subnetmask를 and연산하면 network address가 나옵니다.
## 서브넷 마스크 (Subnet Mask)
- IP주소의 Network ID 부분 알 수 있음
- 크기
- 예시 1
    
    
    | 192.168.1.0
    192.168.1.1
    192.168.1.2
    192.168.1.3
    …
    192.168.1.255
    ___________——
    A                 B |
    | --- |
    
    A 같은 네트워크 내에 동일한 부분 : Network ID
    
    B 같은 네트워크 내에서 서로 다른 부분 : Host ID
    
- 예시 2
    
    
    | Network ID를 연속된 1로 표기 (Host ID 를 0으로 표기)
    1111 1111 . 1111 1111 . 1111 1111 . 0000 0000
    255  .      255   .     255   .    0 			> subnetmask
    IP  192.168.1.10
    sm 255.255.255.0
    and 연산을 network address (동네대표주소)
    IP   11000000 . 10101000 . 00000001 . 00001010
    sm 1111 1111 . 1111 1111 . 1111 1111 . 0000 0000
    and—----------------------------------------------------------
    11000000 . 10101000 . 00000001 . 0000 0000  > 십진수 192.168.1.0 |
    | --- |
# 네트워크 어댑터 (Network Adapter)
## 종류
- interface
- LAN card 랜카드  (그래픽카드, 사운드카드)
- 스위치 포트
## 신호 순서
어떤 시스템의 interface인가에 따라서 보내고 받는 신호 순서가 다릅니다. 이렇게 신호순서가 다르기 때문에 다이렉트 케이블 / 크로스 케이블이 존재 합니다.
### 송신 -> 수신  (Tx -> Rx)
- PC
- 서버
- 라우터

### 수신 -> 송신 (Rx -> Tx)
- 스위치
- 허브
# IP 주소 역할

## 예시
```
network 192.168.1.0
subnet mask 255.255.255.0
```
### IP주소 대역 
```
192.168.1.0 ~ 192.168.1.255
```
### Network Address 대표 역할
```
192.168.1.0
```
### 게이트웨이
```
192.168.1.1
```
### PC 할당
```
192.168.1.2 
...
192.168.1.254
```
### 방송용 역할 (Broadcast Address) 
```
192.168.1.255 
```

# IP주소 클래스
첫번째 옥텟이 어떤 숫자인지에 따라서 class(주소체계)가 달라집니다.
- IP address (32bit) :  Network ID + Host ID
- Network ID : 같은 네트워크 내에서 **동일**한 부분
- Host ID : 같은 네트워크 내에서 **유일**한 부분
## A클래스
- A클래스의 첫번째 옥텟의 비트는 0으로 고정
    - **0xxx xxxx. xxxx xxxx. xxxx xxxx. xxxx xxxx**
- 표현할 수 있는 범위
    - **0000 0000.0000 0000.0000 0000.0000 0000~0111 1110.1111 1111.1111 1111.1111 1111**
    - **0.0.0.0 ~ 127.255.255.255**
- 이 IP클래스는 대규모 네트워크에 적합
- 네트워크 주소는 처음 8비트까지이며, 나머지 24비트는 호스트 주소를 의미
## B클래스
- B클래스는 첫번째 옥텟의 두번째 비트가 고정됨 (10으로 고정)
    - **10xx xxxx. xxxx xxxx. xxxx xxxx. xxxx xxxx**
- 표현할 수 있는 범위
    - **1000 0000. 0000 0000. 0000 0000. 0000 0000~ 1011 1111. 1111 1111. 1111 1111**
    - **128.0.0.0 ~ 191.255.255.255**
- 네트워크 주소는 처음 16비트이며 호스트 주소는 나머지 16비트
## C클래스
- C클래스는 첫번째 옥텟의 세번째 비트가 110으로 고정됩니다.
    - **110x xxxx. xxxx xxxx. xxxx xxxx. xxxx xxxx**
    - 표현할 수 있는 범위
        - **1100 0000. 0000 0000. 0000 0000. 0000 0000 ~ 1101 1111. 1111 1111. 1111 1111. 1111 1111**
    - **192.0.0.0 ~ 223.255.255.255** 입니다.
- 네트워크 주소는 처음 24비트이며 나머지 8비트는 호스트 비트
## D클래스
- D클래스는 첫번째 옥텟의 네번째 비트가 1110으로 고정
    - **1110 xxxx. xxxx xxxx. xxxx xxxx. xxxx xxxx**
- 표현할 수 있는 범위
    - **1110 0000. 0000 0000. 0000 0000. 0000 0000 ~ 1110 1111. 1111 1111. 1111 1111. 1111 1111**
    - **224.0.0.0 ~ 239.255.255.255**
- 멀티캐스트용 대역으로 IP주소에 할당되지 않습니다.
## E클래스
- E클래스는 첫번째 옥텟의 네번째 비트가 1111으로 고정
    - **1111 xxxx. xxxx xxxx. xxxx xxxx. xxxx xxxx**
- 표현할 수 있는 범위
    - **1111 0000. 0000 0000. 0000 0000. 0000 0000 ~ 1111 1111. 1111 1111. 1111 1111. 1111 1111**
    - **240.0.0.0 ~ 255.255.255.255**
- 예약된 주소 대역으로 IP주소에 할당되지 않음
- D와 E클래스는 특정 용도로 사용하기 때문에 실제 IP주소에 할당되지 않음
- 클래스 등급이 낮아지면서 호스트 주소 부분이 점점 줄어들고 있음

# 사설망
- 특정 주소 대역은 사설 IP로 사용
    - **A클래스 사설 IP주소** 10.0.0.0 ~ 10.255.255.255 (N 1개)
    - **B클래스 사설 IP주소** 172.16.0.0 ~ 172.31.255.255  (N 16개)
    - **C클래스 사설 IP주소** 192.168.0.0 ~ 192.168.255.255 (N 256개)
- 사설IP주소는 인터넷이 안됨
- 사설망에서는 인터넷을 위해서 공인IP주소로 변환을 해야 함
- 0.0.0.0, 255.255.255.255처럼 네트워크 시작 주소, 브로드캐스트용주소는 IP주소로 할당되지 않으며, 127.0.0.1과 같은 loopback용 주소 또한 사용할 수 없음

# Network Address translation (NAT 기술)
  - 여러 대의 호스트가 하나의 공인 IP 주소를 사용하여 인터넷에 접속하기 위해
  - 내부 네트워크에서 사용하는 IP 주소와 외부에 드러나는 주소를 다르게 유지할 수 있기 때문에 내부 네트워크에 대한 보안 기능
# tcp통신과정

[https://lh6.googleusercontent.com/v2iQNRT3TaCRDfhIX_H3v24OR1Vdnv4_RuGjYWbYW0UGyPeMvABF3nCIxOKRhS4JWydgfCxzaI6aIV78mXbA4kv2bZOrIU1UPVNHHaVjTZkM6ySutDLnjh8Rcw9Idz3vSmLhYkZJ](https://lh6.googleusercontent.com/v2iQNRT3TaCRDfhIX_H3v24OR1Vdnv4_RuGjYWbYW0UGyPeMvABF3nCIxOKRhS4JWydgfCxzaI6aIV78mXbA4kv2bZOrIU1UPVNHHaVjTZkM6ySutDLnjh8Rcw9Idz3vSmLhYkZJ)

cmd> netstat -an

메일을 보낼 때, SMTP  TCP  서버의 port number  25

메일을 받을 때, POP3  TCP  서버의 port number 110

시뮬레이션 모드에서 확인

FTP  TCP 21, 20   (21로그인, 20파일전송)

passive mode  / active mode

sFTP

FTP over SSL

TFTP  UDP 69 port

DHCP 자동으로 IP를 할당할 때 사용하는 서비스,  67,68

리눅스 원격접속 SSH  TCP 22

telnet TCP 23

다양하 서비스, 해당 전송 프로토콜과 port number

16:05

Network A—------------[ Router ]—---------------Network B

다른 network 를 연결하는 장비는 라우터 입니다.

스위치에게 네트워크를 가상으로 구분하도록 함.  vlan  가상랜

고객A   가상머신1,  가상머신2   : vlan 1

고객B   가상머신3, 가상머신4    : vlan 2

NAT  network address translation 주소변환기술

공인 -> 공인

공인 -> 사설

사설 -> 공인  (* 가장 많이 사용함)  인터넷을 하기 위해서

사설 -> 사설

교육센터

인터넷—-------------장비—---강의장—-------교육생 내에 또다른 사설망

공인IP		사설망		 		가상머신

172.16.0.0/16		192.168.1.0/24